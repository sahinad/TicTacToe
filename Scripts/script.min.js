function secondPlayer(){var n=Math.floor(Math.random()*9);tds[n].textContent=computer;tds[n].style.color="red"}function isThereAnyMove(n){for(var i,t=0;t<3;t++)for(i=0;i<3;i++)if(n[t][i]==="")return!0;return!1}function calculate(n){for(var i,t=0;t<3;t++)if(n[t][0]===n[t][1]&&n[t][1]===n[t][2]){if(n[t][0]===computer)return 10;if(n[t][0]===user)return-10}for(i=0;i<3;i++)if(n[0][i]===n[1][i]&&n[1][i]===n[2][i]){if(n[0][i]===computer)return 10;if(n[0][i]===user)return-10}if(n[0][0]===n[1][1]&&n[1][1]===n[2][2]){if(n[0][0]===computer)return 10;if(n[0][0]===user)return-10}if(n[0][2]===n[1][1]&&n[1][1]===n[2][0]){if(n[0][2]===computer)return 10;if(n[0][2]===user)return-10}return 0}function minimax(n,t,i){var e=calculate(n),f,r,u;if(e===10||e===-10)return e;if(isThereAnyMove(n)===!1)return 0;if(i){for(f=-1e3,r=0;r<3;r++)for(u=0;u<3;u++)n[r][u]===""&&(n[r][u]=computer,f=Math.max(f,minimax(n,t+1,!i)),n[r][u]="");return f}for(f=1e3,r=0;r<3;r++)for(u=0;u<3;u++)n[r][u]===""&&(n[r][u]=user,f=Math.min(f,minimax(n,t+1,!i)),n[r][u]="");return f}function findBestMove(n){var f=-1e3,r={},t,i,u;for(r.row=-1,r.col=-1,t=0;t<3;t++)for(i=0;i<3;i++)n[t][i]===""&&(n[t][i]=computer,u=minimax(n,0,!1),n[t][i]="",u>f&&(r.row=t,r.col=i,f=u));return r}var board=[],whosTurn,turnPlayer,tds=document.getElementsByTagName("td"),tableControl=[],result,computer="x",user="o";$(function(){function r(){var n=$(this).text();t()||n!==""||whosTurn!=="o"||($(this).text(user),$(this).css("color","blue"),whosTurn="x",tableControl=[],u(),setTimeout(e,1e3))}function e(){if(!t()){f();var n=findBestMove(board);$("tr:eq("+n.row+") td:eq("+n.col+")").text(computer);$("tr:eq("+n.row+") td:eq("+n.col+")").css("color","red");tableControl=[];u()}whosTurn="o"}function u(){board=[];f();result=calculate(board);t()&&result===0&&(n.innerHTML="DRAW!",setTimeout(i,3e3));result===10&&(n.innerHTML="YOU LOST!",$("#container").off("click","td"),setTimeout(i,3e3));result===-10&&(n.innerHTML="YOU WON!",$("#container").off("click","td"),setTimeout(i,3e3));tableControl=[];board=[]}function t(){for(var t,n=0;n<9;n++)tableControl.push(tds[n].textContent);return(t=tableControl.indexOf(""),t===-1)?!0:!1}function f(){$("table#theTable tr").each(function(){var n=[],t=$(this).find("td");t.length>0&&(t.each(function(){var t=$(this).text();n.push(t)}),board.push(n))})}function i(){for(var t=0;t<9;t++)tds[t].textContent="";turnPlayer===2&&setTimeout(secondPlayer,200);n.innerHTML="";$("#container").on("click","td",r)}var n=document.getElementById("result");$("#container").on("click","td",r)});